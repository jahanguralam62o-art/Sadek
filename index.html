<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Code Studio Pro üöÄ</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0f172a; color: white; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        .container { display: flex; flex: 1; overflow: hidden; }
        
        /* Left Side: Input & Editor */
        .editor-side { width: 40%; background: #1e293b; padding: 20px; display: flex; flex-direction: column; border-right: 2px solid #334155; }
        textarea { width: 100%; height: 120px; border-radius: 12px; background: #0f172a; color: #60a5fa; padding: 15px; border: 1px solid #3b82f6; outline: none; resize: none; font-size: 14px; }
        
        /* Buttons */
        .btn-group { margin-top: 15px; display: flex; gap: 10px; }
        .btn { flex: 1; padding: 12px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-gen { background: #3b82f6; color: white; }
        .btn-copy { background: #64748b; color: white; }
        
        /* Right Side: Preview */
        .preview-side { width: 60%; background: #f8fafc; position: relative; }
        iframe { width: 100%; height: 100%; border: none; background: white; }
        
        .status-bar { padding: 10px; background: #1e293b; font-size: 12px; color: #94a3b8; text-align: center; border-top: 1px solid #334155; }
        .label { margin-bottom: 8px; font-size: 14px; color: #94a3b8; display: block; }
    </style>
</head>
<body>

<div class="container">
    <div class="editor-side">
        <h2>AI App Studio ‚ö°</h2>
        
        <label class="label">AI ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶¶‡¶ø‡¶® (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞ ‡¶¨‡¶æ‡¶®‡¶æ‡¶ì)</label>
        <textarea id="promptInput" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø‡ßü‡¶æ ‡¶¨‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶ï‡¶•‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
        
        <div class="btn-group">
            <button class="btn btn-gen" onclick="generateOrUpdate()">‡¶∞‡¶æ‡¶® / ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‚ú®</button>
            <button class="btn btn-copy" onclick="copyCode()">‡¶ï‡ßã‡¶° ‡¶ï‡¶™‡¶ø üìã</button>
        </div>

        <div style="margin-top: 20px;">
            <label class="label">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶ï‡ßã‡¶° (Auto-Saved):</label>
            <textarea id="codeDisplay" readonly style="height: 300px; font-family: monospace; font-size: 12px; color: #10b981;"></textarea>
        </div>
    </div>

    <div class="preview-side">
        <iframe id="appPreview"></iframe>
    </div>
</div>

<div class="status-bar" id="status">‡¶∞‡ßá‡¶°‡¶ø... ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßá‡¶∞ ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®‡•§</div>

<script>
    const API_KEY = "AIzaSyBtXLHiRrgszcaYwb22h6QL_NPZ71UFHl4"; // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ API Key
    let currentCode = localStorage.getItem('last_project') || "<h1>‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!</h1><p>‡¶¨‡¶æ‡¶Æ‡¶™‡¶æ‡¶∂‡ßá ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶§‡ßà‡¶∞‡¶ø ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>";

    // ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶ï‡ßã‡¶° ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
    window.onload = () => {
        updateUI(currentCode);
    };

    async function generateOrUpdate() {
        const prompt = document.getElementById('promptInput').value;
        const status = document.getElementById('status');
        if (!prompt) return alert("‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!");

        status.innerText = "AI ‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶æ ‡¶ï‡¶∞‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßã‡¶° ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶õ‡ßá...";

        try {
            const genUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;
            
            // AI-‡¶ï‡ßá ‡¶¨‡¶≤‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶ï‡ßã‡¶°‡¶ü‡¶ø‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá
            const contextPrompt = `Current Code: ${currentCode}\n\nUser Command: ${prompt}\n\nUpdate the code based on the command. Return ONLY the full HTML code including CSS and JS. No explanations.`;

            const response = await fetch(genUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: contextPrompt }] }]
                })
            });

            const data = await response.json();
            let newCode = data.candidates[0].content.parts[0].text.replace(/```html|```javascript|```css|```/g, "").trim();

            currentCode = newCode;
            localStorage.setItem('last_project', currentCode); // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶∏‡ßá‡¶≠
            updateUI(currentCode);
            status.innerText = "‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!";
            document.getElementById('promptInput').value = ""; // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ

        } catch (e) {
            status.innerText = "Error: " + e.message;
        }
    }

    function updateUI(code) {
        document.getElementById('codeDisplay').value = code;
        const frame = document.getElementById('appPreview');
        const doc = frame.contentWindow.document;
        doc.open();
        doc.write(code);
        doc.close();
    }

    function copyCode() {
        const codeText = document.getElementById('codeDisplay');
        codeText.select();
        document.execCommand("copy");
        alert("‡¶ï‡ßã‡¶° ‡¶ï‡ßç‡¶≤‡¶ø‡¶™‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
    }
</script>

</body>
</html>
